local module = {}

module["Name"] = "Throw Knife MM2 Mod"

 -- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

table.insert(module, {
		Type = "Button",
		Args = {"Throw knife to closest player", function(Self)
	 		if findMurderer() ~= localplayer then 
	 			fu.notification("You're not murderer.") 
	 			return 
	 		end
	
	 		if not localplayer.Character:FindFirstChild("Knife") then
	 			local hum = localplayer.Character:FindFirstChild("Humanoid")
	 			if localplayer.Backpack:FindFirstChild("Knife") then
	 				hum:EquipTool(localplayer.Backpack:FindFirstChild("Knife"))
	 			else
	 				fu.notification("You don't have the knife.")
	 				return
	 			end
	 		end
			
	 		local closestPlayer = findNearestPlayer()
	 		if not closestPlayer then
	 			fu.notification("No player found to throw at.")
	 			return
	 		end
			
	
	 		local closestPlayerHRP = closestPlayer.Character:FindFirstChild("HumanoidRootPart")
	 		if not closestPlayerHRP then
	 			fu.notification("Could not find the closest player's HumanoidRootPart.")
	 			return
	 		end
			
	 		local lpknife = localplayer.Backpack:FindFirstChild("Knife")
	 		if not lpknife then
	 			fu.notification("You don't have the knife.")
	 		end
	
	 		 local predictedPosition = getPredictedPosition(closestPlayer, shootOffset * 2.5)
	
	 		local args = {
	 			[1] = lpknife:GetPivot(), 
	 			[2] = closestPlayerHRP.Position
	 		}
	
	 		localplayer.Character.Knife.Throw:FireServer(unpack(args))
	 	end,}
	 })
		
_G.Modules = _G.Modules or {}
_G.Modules[#_G.Modules + 1] = module

return module
